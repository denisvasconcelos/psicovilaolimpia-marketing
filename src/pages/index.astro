---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Steps from '~/components/widgets/Steps.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import SpecialtyCard from '~/components/custom/SpecialtyCard.astro';
import unidade01 from '~/assets/images/unidade/psico-vila-olimpia-01.jpg';
import unidade03 from '~/assets/images/unidade/psico-vila-olimpia-03.jpg';
import unidade05 from '~/assets/images/unidade/psico-vila-olimpia-05.jpg';
import unidade06 from '~/assets/images/unidade/psico-vila-olimpia-06.jpg';
import unidade07 from '~/assets/images/unidade/psico-vila-olimpia-07.jpg';
import unidade08 from '~/assets/images/unidade/psico-vila-olimpia-08.jpg';
import unidade09 from '~/assets/images/unidade/psico-vila-olimpia-09.jpg';

const metadata = {
  title: 'Psicólogas em São Paulo | Psico Vila Olimpia',
  description: 'Psicoterapia de qualidade na Vila Olímpia. Terapia individual, casal, familiar. Profissionais especializadas, atendimento presencial e online.',
  ignoreTitleTemplate: true,
};

// Dados das especialidades
const specialties = [
  {
    title: 'Terapia Individual',
    description: 'Descubra seu potencial através do autoconhecimento. Tratamos ansiedade, depressão, estresse e promovemos o equilíbrio emocional.',
    icon: 'tabler:user',
    slug: 'terapia-individual',
    image: 'https://images.unsplash.com/photo-1571174067320-a40909655c6b?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
    features: [
      'Tratamento de ansiedade e pânico',
      'Superação da depressão',
      'Fortalecimento da autoestima'
    ],
    isHighlighted: true,
  },
  {
    title: 'Terapia de Casal',
    description: 'Fortaleça seus vínculos afetivos. Trabalhamos comunicação, conflitos e construção de relacionamentos saudáveis.',
    icon: 'tabler:heart',
    slug: 'terapia-de-casal',
    image: 'https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
    features: [
      'Melhoria da comunicação',
      'Resolução de conflitos',
      'Reconstrução da intimidade'
    ],
  },
  {
    title: 'Terapia Familiar',
    description: 'Harmonia familiar é possível. Mediamos conflitos e fortalecemos laços entre gerações.',
    icon: 'tabler:users',
    slug: 'terapia-familiar',
    image: 'https://images.unsplash.com/photo-1511895426328-dc8714191300?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
    features: [
      'Mediação de conflitos familiares',
      'Fortalecimento de vínculos',
      'Dinâmica familiar saudável'
    ],
  },
  {
    title: 'Terapia Infantil e Adolescente',
    description: 'Cuidado especializado para cada fase do desenvolvimento. Apoio em dificuldades escolares, comportamentais e emocionais.',
    icon: 'tabler:baby-carriage',
    slug: 'terapia-infantil-adolescente',
    image: 'https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
    features: [
      'Dificuldades escolares',
      'Problemas comportamentais',
      'Desenvolvimento emocional'
    ],
  },
  {
    title: 'Psiquiatria',
    description: 'Tratamento médico integrado. Diagnóstico e medicação quando necessário, sempre com abordagem humanizada.',
    icon: 'tabler:brain',
    slug: 'psiquiatria',
    image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
    features: [
      'Diagnóstico especializado',
      'Prescrição médica',
      'Acompanhamento integrado'
    ],
  },
  {
    title: 'Avaliações Psicológicas',
    description: 'Laudos especializados para cirurgias, concursos e demandas específicas com rigor técnico e agilidade.',
    icon: 'tabler:clipboard-check',
    slug: 'avaliacoes-psicologicas',
    image: 'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
    features: [
      'Laudos para cirurgias',
      'Avaliações para concursos',
      'Relatórios especializados'
    ],
  },
];
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->
  <Hero
    actions={[
      {
        variant: 'primary',
        text: 'Agendar Consulta',
        href: 'https://wa.me/5511985946105?text=Olá! Gostaria de agendar uma consulta.',
        target: '_blank',
        icon: 'tabler:brand-whatsapp',
      },
    ]}
    image={{ 
      src: '~/assets/images/hero-psicologa.jpg', 
      alt: 'Psicóloga acolhedora em ambiente moderno - Psico Vila Olimpia' 
    }}
  >
    <Fragment slot="title">
      Transforme sua vida com as <span class="text-primary dark:text-blue-300">melhores psicólogas</span> de São Paulo
    </Fragment>

    <Fragment slot="subtitle">
      <span class="font-medium">Atendimento psicológico especializado e acolhedor na Vila Olímpia.</span> 
      Presencial e online. Mais de 10 anos transformando vidas através da psicoterapia de qualidade.
    </Fragment>
  </Hero>

  <!-- Especialidades - Custom Section com SpecialtyCard -->
  <section id="especialidades" class="-mt-12 md:-mt-16 pt-8 md:pt-12 lg:pt-16 pb-12 md:pb-16 lg:pb-20">
    <div class="mx-auto max-w-7xl px-4 sm:px-6">
      <!-- Header da seção -->
      <div class="mx-auto max-w-3xl text-center mb-8 md:mb-12">
        <h2 class="text-3xl md:text-4xl font-bold leading-tighter tracking-tighter mb-4 font-heading dark:text-gray-200">
          Nossas Especialidades
        </h2>
        <p class="text-xl text-muted dark:text-slate-300">
          Oferecemos atendimento especializado para cada momento da sua vida
        </p>
      </div>

      <!-- Grid de especialidades -->
      <div class="grid gap-4 md:gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {specialties.map((specialty) => (
          <SpecialtyCard 
            specialty={specialty} 
            showFeatures={true}
          />
        ))}
      </div>

    </div>

    <!-- Background decorativo -->
    <div class="absolute inset-0 bg-gray-50 dark:bg-transparent -z-10"></div>
  </section>

  <!-- Por que nos escolher - Seção customizada com carrousel -->
  <section class="py-8 md:py-12 lg:py-16">
    <div class="mx-auto max-w-7xl px-4 sm:px-6">
      <div class="grid gap-8 md:gap-12 lg:gap-16 md:grid-cols-2 lg:items-center">
        
        <!-- Carrousel de imagens -->
        <div class="order-2 md:order-1">
          <div class="carousel-container relative overflow-hidden rounded-xl shadow-lg">
            <div class="carousel-track flex transition-transform duration-500 ease-in-out" id="carouselTrack">
              <img src={unidade01.src} alt="Consultório Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade03.src} alt="Ambiente acolhedor Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade05.src} alt="Sala de atendimento Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade06.src} alt="Recepção Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade07.src} alt="Espaço terapêutico Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade08.src} alt="Consultório premium Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
              <img src={unidade09.src} alt="Ambiente profissional Psico Vila Olimpia" class="carousel-slide w-full h-96 object-cover flex-shrink-0" />
            </div>
            
            <!-- Indicadores -->
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white active" data-slide="0"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="1"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="2"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="3"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="4"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="5"></button>
              <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition-colors duration-200 hover:bg-white" data-slide="6"></button>
            </div>
          </div>
        </div>

        <!-- Conteúdo -->
        <div class="order-1 md:order-2">
          <p class="text-base text-primary font-bold tracking-wide uppercase mb-2">
            Por que nos escolher
          </p>
          <h2 class="text-3xl md:text-4xl font-bold leading-tighter tracking-tighter mb-4 font-heading dark:text-gray-200">
            Por que somos referência em psicoterapia?
          </h2>
          <p class="text-xl text-muted dark:text-slate-300 mb-8">
            Mais de 10 anos transformando vidas em São Paulo
          </p>

          <!-- Lista de diferenciais -->
          <div class="grid gap-6 sm:grid-cols-2">
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:award" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Profissionais Qualificadas</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Psicólogas pós-graduadas com especialização em TCC e vasta experiência clínica.</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:building" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Atendimento Premium</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Ambiente acolhedor e sigiloso na Vila Olímpia, pensado para o seu bem-estar.</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:device-laptop" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Flexibilidade Total</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Modalidades presencial, online e híbrida para se adaptar à sua rotina.</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:chart-line" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Resultados Comprovados</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Centenas de vidas transformadas através de nossa metodologia humanizada.</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:clock" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Agilidade no Atendimento</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Agendamento rápido via WhatsApp e horários flexíveis, incluindo fins de semana.</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex-shrink-0 mr-4">
                <astro-icon name="tabler:shield-check" class="w-6 h-6" style="color: #046a80;" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Sigilo Absoluto</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Ambiente discreto e profissional com total garantia de privacidade.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Steps Widget ****************** -->
  <Steps
    title="Como começar sua jornada de transformação"
    subtitle="Um processo simples e acolhedor para cuidar da sua saúde mental"
    items={[
      {
        title: 'Primeiro Contato',
        description:
          'Entre em contato via WhatsApp ou formulário. Nossa equipe responde rapidamente e tira todas suas dúvidas sobre especialidades, horários e modalidades de atendimento.',
        icon: 'tabler:message-circle',
      },
      {
        title: 'Agendamento',
        description:
          'Escolha o horário ideal entre nossas opções flexíveis de segunda a sábado. Confirmamos por WhatsApp ou telefone e enviamos todas as informações necessárias.',
        icon: 'tabler:calendar',
      },
      {
        title: 'Primeira Sessão',
        description:
          'Acolhimento personalizado para entender suas necessidades, histórico e objetivos. Definimos juntos o melhor plano terapêutico para sua situação específica.',
        icon: 'tabler:users',
      },
      {
        title: 'Acompanhamento',
        description:
          'Sessões regulares com foco em resultados concretos e evolução contínua do seu bem-estar. Monitoramento constante do progresso e ajustes quando necessário.',
        icon: 'tabler:trending-up',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1612015747941-3390bc2e44db?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
      alt: 'Jornada de transformação pessoal - crescimento e bem-estar',
    }}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-gray-50 dark:bg-transparent"></div>
    </Fragment>
  </Steps>

  <!-- CallToAction Widget *********** -->
  <CallToAction
    title="Pronto para transformar sua vida?"
    subtitle="Não deixe para depois e agende sua consulta hoje mesmo. Dê o primeiro passo rumo ao seu bem-estar!"
    actions={[
      {
        variant: 'primary',
        text: 'Agendar Consulta',
        href: 'https://wa.me/5511985946105?text=Olá! Quero agendar minha consulta e começar minha transformação.',
        target: '_blank',
        icon: 'tabler:brand-whatsapp',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white"></div>
    </Fragment>
  </CallToAction>
</Layout>

<style>
  /* Estilos específicos para a seção de especialidades */
  #especialidades {
    position: relative;
  }

  /* Animação de entrada para os cards */
  #especialidades .grid > * {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
  }

  #especialidades .grid > *:nth-child(1) { animation-delay: 0.1s; }
  #especialidades .grid > *:nth-child(2) { animation-delay: 0.2s; }
  #especialidades .grid > *:nth-child(3) { animation-delay: 0.3s; }
  #especialidades .grid > *:nth-child(4) { animation-delay: 0.4s; }
  #especialidades .grid > *:nth-child(5) { animation-delay: 0.5s; }
  #especialidades .grid > *:nth-child(6) { animation-delay: 0.6s; }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Melhorar responsividade do grid */
  @media (max-width: 640px) {
    #especialidades .grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
  }

  @media (min-width: 640px) and (max-width: 1024px) {
    #especialidades .grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Efeito de parallax sutil no background */
  #especialidades::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(4, 106, 128, 0.02) 0%, rgba(115, 206, 225, 0.02) 100%);
    pointer-events: none;
  }

  /* Estilos do carrousel */
  .carousel-indicator.active {
    background-color: white !important;
  }
</style>

<script is:inline>
  // Função para inicializar o carrousel
  function initCarousel() {
    const track = document.getElementById('carouselTrack');
    const indicators = document.querySelectorAll('.carousel-indicator');
    
    if (!track || indicators.length === 0) {
      console.warn('Carousel elements not found');
      return;
    }

    let currentSlide = 0;
    const totalSlides = 7;
    let autoPlayInterval;

    function updateCarousel() {
      track.style.transform = `translateX(-${currentSlide * 100}%)`;
      
      indicators.forEach((indicator, index) => {
        if (index === currentSlide) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });
    }

    // Indicadores clicáveis
    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        currentSlide = index;
        updateCarousel();
        
        // Reiniciar auto-play quando usuário interage
        clearInterval(autoPlayInterval);
        startAutoPlay();
      });
    });

    // Função para iniciar auto-play
    function startAutoPlay() {
      autoPlayInterval = setInterval(() => {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateCarousel();
      }, 3000);
    }

    // Inicializar carrousel
    updateCarousel();
    startAutoPlay();

    // Pausar auto-play quando mouse está sobre o carrousel
    track.parentElement.addEventListener('mouseenter', () => {
      clearInterval(autoPlayInterval);
    });

    track.parentElement.addEventListener('mouseleave', () => {
      startAutoPlay();
    });
  }

  // Inicializar quando DOM estiver pronto
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCarousel);
  } else {
    initCarousel();
  }
</script>